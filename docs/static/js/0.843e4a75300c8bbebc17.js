webpackJsonp([0],{Wc5d:function(e,t){},a2TZ:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){this.config={isMobile:!1,background:2631720,ground:-1,fallingSpeed:.2,cubeColor:12500670,cubeWidth:4,cubeHeight:2,cubeDeep:4,jumperColor:2302755,jumperWidth:1,jumperHeight:2,jumperDeep:1},this.score=0,this.size={width:window.innerWidth,height:window.innerHeight},this.scene=new THREE.Scene,this.cameraPos={current:new THREE.Vector3(0,0,0),next:new THREE.Vector3},this.camera=new THREE.OrthographicCamera(this.size.width/-80,this.size.width/80,this.size.height/80,this.size.height/-80,0,5e3),this.renderer=new THREE.WebGLRenderer({antialias:!0}),this.cubes=[],this.cubeStat={nextDir:""},this.jumperStat={ready:!1,xSpeed:0,ySpeed:0},this.falledStat={location:-1,distance:0},this.fallingStat={speed:.2,end:!1}};s.prototype={init:function(){this._checkUserAgent(),this._setCamera(),this._setRenderer(),this._setLight(),this._createCube(),this._createCube(),this._createJumper(),this._updateCamera();var e=this,t=e.config.isMobile?{down:"touchstart",up:"touchend"}:{down:"mousedown",up:"mouseup"},i=document.querySelector("canvas");i.addEventListener(t.down,function(){e._handleMousedown()}),i.addEventListener(t.up,function(t){e._handleMouseup()}),window.addEventListener("resize",function(){e._handleWindowResize()})},restart:function(){this.score=0,this.cameraPos={current:new THREE.Vector3(0,0,0),next:new THREE.Vector3},this.fallingStat={speed:.2,end:!1};for(var e=this.cubes.length,t=0;t<e;t++)this.scene.remove(this.cubes.pop());this.scene.remove(this.jumper),this.successCallback(this.score),this._createCube(),this._createCube(),this._createJumper(),this._updateCamera()},addSuccessFn:function(e){this.successCallback=e},addFailedFn:function(e){this.failedCallback=e},_checkUserAgent:function(){var e=navigator.userAgent;(e.match(/Android/i)||e.match(/webOS/i)||e.match(/iPhone/i)||e.match(/iPad/i)||e.match(/iPod/i)||e.match(/BlackBerry/i))&&(this.config.isMobile=!0)},_createHelpers:function(){var e=new THREE.AxesHelper(10);this.scene.add(e)},_handleWindowResize:function(){this._setSize(),this.camera.left=this.size.width/-80,this.camera.right=this.size.width/80,this.camera.top=this.size.height/80,this.camera.bottom=this.size.height/-80,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.size.width,this.size.height),this._render()},_handleMousedown:function(){var e=this;!e.jumperStat.ready&&e.jumper.scale.y>.02&&(e.jumper.scale.y-=.01,e.jumperStat.xSpeed+=.004,e.jumperStat.ySpeed+=.008,e._render(e.scene,e.camera),requestAnimationFrame(function(){e._handleMousedown()}))},_handleMouseup:function(){var e=this;e.jumperStat.ready=!0,e.jumper.position.y>=1?("left"===e.cubeStat.nextDir?e.jumper.position.x-=e.jumperStat.xSpeed:e.jumper.position.z-=e.jumperStat.xSpeed,e.jumper.position.y+=e.jumperStat.ySpeed,e.jumper.scale.y<1&&(e.jumper.scale.y+=.02),e.jumperStat.ySpeed-=.01,e._render(e.scene,e.camera),requestAnimationFrame(function(){e._handleMouseup()})):(e.jumperStat.ready=!1,e.jumperStat.xSpeed=0,e.jumperStat.ySpeed=0,e.jumper.position.y=1,e._checkInCube(),1===e.falledStat.location?(e.score++,e._createCube(),e._updateCamera(),e.successCallback&&e.successCallback(e.score)):e._falling())},_fallingRotate:function(e){var t=this,i=t.falledStat.distance-t.config.cubeWidth/2,s="z",n=t.jumper.rotation[s]+.1,a=t.jumper.rotation[s]<Math.PI/2,r=t.config.ground+t.config.jumperWidth/2+i;if("rightTop"===e)s="x",n=t.jumper.rotation[s]-.1,a=t.jumper.rotation[s]>-Math.PI/2,t.jumper.geometry.translate.z=i;else if("rightBottom"===e)s="x",n=t.jumper.rotation[s]+.1,a=t.jumper.rotation[s]<Math.PI/2,t.jumper.geometry.translate.z=-i;else if("leftBottom"===e)s="z",n=t.jumper.rotation[s]-.1,a=t.jumper.rotation[s]>-Math.PI/2,t.jumper.geometry.translate.x=-i;else if("leftTop"===e)s="z",n=t.jumper.rotation[s]+.1,a=t.jumper.rotation[s]<Math.PI/2,t.jumper.geometry.translate.x=i;else{if("none"!==e)throw Error("Arguments Error");a=!1,r=t.config.ground}t.fallingStat.end?t.failedCallback&&t.failedCallback():(a?t.jumper.rotation[s]=n:t.jumper.position.y>r?t.jumper.position.y-=t.config.fallingSpeed:t.fallingStat.end=!0,t._render(),requestAnimationFrame(function(){t._falling()}))},_falling:function(){0==this.falledStat.location?this._fallingRotate("none"):-10===this.falledStat.location?"left"==this.cubeStat.nextDir?this._fallingRotate("leftTop"):this._fallingRotate("rightTop"):10===this.falledStat.location&&("left"==this.cubeStat.nextDir?this.jumper.position.x<this.cubes[this.cubes.length-1].position.x?this._fallingRotate("leftTop"):this._fallingRotate("leftBottom"):this.jumper.position.z<this.cubes[this.cubes.length-1].position.z?this._fallingRotate("rightTop"):this._fallingRotate("rightBottom"))},_checkInCube:function(){if(this.cubes.length>1){var e={x:this.jumper.position.x,z:this.jumper.position.z},t={x:this.cubes[this.cubes.length-1-1].position.x,z:this.cubes[this.cubes.length-1-1].position.z},i={x:this.cubes[this.cubes.length-1].position.x,z:this.cubes[this.cubes.length-1].position.z},s=void 0,n=void 0;"left"===this.cubeStat.nextDir?(s=Math.abs(e.x-t.x),n=Math.abs(e.x-i.x)):(s=Math.abs(e.z-t.z),n=Math.abs(e.z-i.z));var a=this.config.cubeWidth/2+this.config.jumperWidth/2,r=0;s<a?(this.falledStat.distance=s,r=s<this.config.cubeWidth/2?-1:-10):n<a?(this.falledStat.distance=n,r=n<this.config.cubeWidth/2?1:10):r=0,this.falledStat.location=r}},_updateCameraPos:function(){var e=this.cubes.length-1,t=this.cubes[e].position.x,i=this.cubes[e].position.z,s=this.cubes[e-1].position.x,n=this.cubes[e-1].position.z,a=new THREE.Vector3;a.x=(t+s)/2,a.y=0,a.z=(i+n)/2,this.cameraPos.next=a},_updateCamera:function(){var e=this,t={x:e.cameraPos.current.x,y:e.cameraPos.current.y,z:e.cameraPos.current.z},i=e.cameraPos.next.x,s=(e.cameraPos.next.y,e.cameraPos.next.z);(t.x>i||t.z>s)&&(e.cameraPos.current.x-=.1,e.cameraPos.current.z-=.1,e.cameraPos.current.x-e.cameraPos.next.x<.05&&(e.cameraPos.current.x=e.cameraPos.next.x),e.cameraPos.current.z-e.cameraPos.next.z<.05&&(e.cameraPos.current.z=e.cameraPos.next.z),e.camera.lookAt(new THREE.Vector3(t.x,0,t.z)),e._render(),requestAnimationFrame(function(){e._updateCamera()}))},_createJumper:function(){var e=new THREE.MeshLambertMaterial({color:this.config.jumperColor}),t=new THREE.CubeGeometry(this.config.jumperWidth,this.config.jumperHeight,this.config.jumperDeep);t.translate(0,1,0);var i=new THREE.Mesh(t,e);i.position.y=1,this.jumper=i,this.scene.add(this.jumper)},_createCube:function(){var e=new THREE.MeshLambertMaterial({color:this.config.cubeColor}),t=new THREE.CubeGeometry(this.config.cubeWidth,this.config.cubeHeight,this.config.cubeDeep),i=new THREE.Mesh(t,e);if(this.cubes.length){var s=Math.random();this.cubeStat.nextDir=s>.5?"left":"right",i.position.x=this.cubes[this.cubes.length-1].position.x,i.position.y=this.cubes[this.cubes.length-1].position.y,i.position.z=this.cubes[this.cubes.length-1].position.z,"left"===this.cubeStat.nextDir?i.position.x=this.cubes[this.cubes.length-1].position.x-4*Math.random()-6:i.position.z=this.cubes[this.cubes.length-1].position.z-4*Math.random()-6}this.cubes.push(i),this.cubes.length>6&&this.scene.remove(this.cubes.shift()),this.scene.add(i),this.cubes.length>1&&this._updateCameraPos()},_render:function(){this.renderer.render(this.scene,this.camera)},_setLight:function(){var e=new THREE.DirectionalLight(16777215,1.1);e.position.set(3,10,5),this.scene.add(e);var t=new THREE.AmbientLight(16777215,.3);this.scene.add(t)},_setCamera:function(){this.camera.position.set(100,100,100),this.camera.lookAt(this.cameraPos.current)},_setRenderer:function(){this.renderer.setSize(this.size.width,this.size.height),this.renderer.setClearColor(this.config.background),document.body.appendChild(this.renderer.domElement)},_setSize:function(){this.size.width=window.innerWidth,this.size.height=window.innerHeight}};var n=s,a={name:"jump",data:function(){return{}},mounted:function(){var e=new n;e.init(),e.addSuccessFn(function(e){document.querySelector(".score-current").innerText=e}),e.addFailedFn(function(){s.innerText=e.score,t.style.display="flex"});var t=document.querySelector(".mask"),i=document.querySelector(".restart"),s=document.querySelector(".score");i.addEventListener("click",function(){t.style.display="none",e.restart()})}},r={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container"},[i("div",{staticClass:"mask"},[i("div",{staticClass:"content"},[i("div",{staticClass:"score-container"},[i("p",{staticClass:"title"},[e._v("本次得分")]),e._v(" "),i("p",{staticClass:"score"},[e._v("0")])]),e._v(" "),i("button",{staticClass:"restart"},[e._v("\n                重新开始\n            ")])])]),e._v(" "),i("div",{staticClass:"info"},[i("a",{staticClass:"title",attrs:{href:"https://github.com/luosijie/threejs-examples",target:"_blank"}},[e._v("\n          Jump\n        ")]),e._v(" "),i("a",{staticClass:"author",attrs:{href:"https://luosijie.github.io/",target:"_blank"}},[e._v("\n          Created By Jesse Luo\n        ")]),e._v(" "),i("div",{staticClass:"score-gaming"},[e._v("\n            得分："),i("span",{staticClass:"score-current"},[e._v("0")])])])])}]};var o=i("VU/8")(a,r,!1,function(e){i("Wc5d")},"data-v-ec385bdc",null);t.default=o.exports}});
//# sourceMappingURL=0.843e4a75300c8bbebc17.js.map