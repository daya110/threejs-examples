{"version":3,"sources":["webpack:///./src/pages/mini-city/js/utils.js","webpack:///./src/pages/mini-city/js/Car.js","webpack:///./src/pages/mini-city/js/textures.js","webpack:///./src/pages/mini-city/config/treesPosition.js","webpack:///src/pages/mini-city/index.vue","webpack:///./src/pages/mini-city/index.vue?926c","webpack:///./src/pages/mini-city/index.vue"],"names":["utils","makeShape","shape","window","THREE","arguments","length","arry","Shape","moveTo","i","lineTo","pathCoords","path","Path","holes","push","console","error","makeExtrudeGeometry","amount","extrudeSetting","steps","bevelEnabled","geometry","ExtrudeBufferGeometry","rotateX","Math","PI","makeShapeGeometry","shapeCoords","this","ShapeGeometry","makeMesh","type","color","material","mesh","MeshLambertMaterial","MeshPhongMaterial","Mesh","castShadow","receiveShadow","Car","colors","index","floor","random","Object3D","wheels","startAngle","that","makeWindow","coords","carBodyShape","carBodyGeometry","translate","carBody","add","addBody","carWindows","carWindowLeft","carWindowLeftFront","carWindowLeftBack","position","z","carWindowRight","clone","carWindowFrontGeometry","CubeGeometry","rotateZ","carWindowFront","carWindowBack","rotation","x","y","addWindows","carLightsGeometry","Geometry","carLigetGeometry","BoxGeometry","forEach","elem","merge","carLightFrontGeometry","scale","carLightBackGeometry","BufferGeometry","fromGeometry","carLights","addLights","wheelFrontLeft","createWheel","set","wheelFrontRight","wheelBackLeft","wheelBackRight","wheel","wheelOuterGeometry","CylinderGeometry","wheelOuter","wheelInner","wheelCenterGeometry","wheelCenter","addWheels","prototype","setPosition","forward","speed","_moving","backward","turnLeft","angle","_turn","turnRight","direction","originAngle","xLength","cos","zLength","sin","_rotateWheels","textures","canvas","document","createElement","ctx","getContext","width","height","fillStyle","fillRect","canvasTexture","Texture","wrapS","RepeatWrapping","wrapT","needsUpdate","treesPosition","mini_city","name","data","scene","camera","renderer","cars","config","isMobile","background","methods","checkUserAgent","n","navigator","userAgent","match","shadowMap","enabled","buildMovingCars","_this2","car","js_Car","r","buildStaticCars","_this3","buildRoad","road","roadBorderOuterShape","js_utils","roadBorderOuterGeometry","roadBorderOuter","roadBorderInnerShape","roadBorderInnnerGeometry","roadBoaderInnder","roadLinesGeometry","roadLineGeometry","roadLinesBottomGeometry","roadLinesTopGeometry","roadLinesLeftGeometry","rotateY","roadLinesRightGeometry","roadLines","buildbuilding","fenseShape","fenseGeometry","fense","greenShape","greenGeometry","green","hospital","_this","planeGeometry","BoxBufferGeometry","plane","config_treesPosition","tree","treeTrunkGeometry","treeTrunk","treeLeafsGeometry","treeLeafs","createTree","baseGeometry","base","frontMainShape","frontMainGeometry","frontMainMaterial","map","js_textures","repeat","frontMain","frontTopShape","frontTopGeometry","frontTop","frontRoofShelfGeometry","frontRoofShelfCubeGeometry","_i","_geometry","frontRoofShelfCubeYPosition","_i2","p","_geometry2","frontRoofShelf","frontPlatGeometry","fronPlat","frontPlatVerticalGeometry","frontPlatVertical","frontPlatVerticalWhiteGeometry","frontPlatVerticalWhite","frontPlatPillarGeometry","frontPlatPillar","frontPlatPillar2","frontBorderVerticles","frontBorderVerticleGeometry","frontBorderVerticleMesh","frontBorderVerticle1","frontBorderVerticle2","frontBorderVerticle3","frontRoofShape","frontRoofGeometry","frontRoof","backMainShape","backMainGeometry","backMain","backMiddleShape","backMiddkeGeometry","backMiddle","backMiddleWindowGeometry","PlaneGeometry","backMiddleWindowMaterial","backMiddleWindow","windowBackOrigin","windowObj","glassGeometry","glass","windowBorderGeometry","windowBorder","windowBorderTop","windowBorderBottom","windowBorderLeft","windowBorderRight","createWindow","_i3","j","createHospital","lamp","pillarGeomertry","pillar","connectGeometry","connect","lightGeometry","light","createLamp","buildLightSystem","hemisphereLight","HemisphereLight","_light","AmbientLight","directionalLight","DirectionalLight","target","d","shadow","OrthographicCamera","bias","mapSize","buildAuxSystem","gridHelper","GridHelper","controls","OrbitControls","domElement","enableDamping","dampingFactor","rotateSpeed","carMoving","onWindowResize","_this4","addEventListener","innerWidth","innerHeight","aspect","updateProjectionMatrix","setSize","loop","_this5","render","requestAnimationFrame","mounted","Scene","PerspectiveCamera","lookAt","WebGLRenderer","antialias","querySelector","setClearColor","PCFSoftShadowMap","pages_mini_city","$createElement","_self","_c","_m","staticRenderFns","_h","staticClass","attrs","href","_v","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/4.5ef0b59b39aa549cfb0c.js","sourcesContent":["let utils = {\n    makeShape: function() {\n        let shape\n        if (window.THREE && arguments.length) {\n            let arry = arguments[0]\n            shape = new THREE.Shape()\n            shape.moveTo(arry[0][0], arry[0][1])\n            for (let i = 1; i < arry.length; i++) {\n                shape.lineTo(arry[i][0], arry[i][1])\n            }\n            if (arguments.length > 1) {\n                for (let i = 1; i < arguments.length; i++) {\n                    let pathCoords = arguments[i]\n                    let path = new THREE.Path()\n                    path.moveTo(pathCoords[0][0], pathCoords[0][1])\n                    for (let i = 1; i < pathCoords.length; i++) {\n                        path.lineTo(pathCoords[i][0], pathCoords[i][1])\n                    }\n                    shape.holes.push(path)\n                }\n            }\n            return shape\n        } else {\n            console.error('Something wrong!')\n        }\n    },\n    makeExtrudeGeometry: function(shape, amount) {\n        let extrudeSetting = {\n            steps: 1,\n            amount: amount,\n            bevelEnabled: false\n        }\n        let geometry = new THREE.ExtrudeBufferGeometry(shape, extrudeSetting)\n        geometry.rotateX(-0.5 * Math.PI)\n        return geometry\n    },\n    makeShapeGeometry: function(shapeCoords) {\n        let shape = this.makeShape(shapeCoords)\n        let geometry = new THREE.ShapeGeometry(shape)\n        return geometry\n    },\n    makeMesh: function(type, geometry, color) {\n        let material\n        let mesh\n        if (type === 'lambert') {\n            material = new THREE.MeshLambertMaterial({ color: color })\n        } else if (type === 'phong') {\n            material = new THREE.MeshPhongMaterial({ color: color })\n        } else {\n            console.error('unrecognized type!')\n        }\n\n        mesh = new THREE.Mesh(geometry, material)\n\n        mesh.castShadow = true\n        mesh.receiveShadow = true\n\n        return mesh\n\n    }\n}\n\nexport default utils\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/mini-city/js/utils.js","'use strict'\nimport utils from './utils.js';\nconst Car = function(color) {\n    let colors = [0x2cbab2, 0x47a700, 0xd60000, 0x087f87, 0x37ad0e, 0x4d4d4d, 0xce7e00, 0xe0a213, 0x87bcde]\n    let index = Math.floor(Math.random() * colors.length)\n\n    this.color = color || colors[index]\n    this.mesh = new THREE.Object3D()\n    this.wheels = []\n    this.startAngle = 0\n\n    let that = this\n    addBody()\n    addWindows()\n    addLights()\n    addWheels()\n\n    function addWheels() {\n        let wheelFrontLeft = createWheel()\n        wheelFrontLeft.position.set(8, 3, -6)\n        that.wheels.push(wheelFrontLeft)\n        that.mesh.add(wheelFrontLeft)\n\n        let wheelFrontRight = createWheel()\n        wheelFrontRight.position.set(8, 3, 6)\n        that.wheels.push(wheelFrontRight)\n        that.mesh.add(wheelFrontRight)\n\n        let wheelBackLeft = createWheel()\n        wheelBackLeft.position.set(-8, 3, 6)\n        that.wheels.push(wheelBackLeft)\n        that.mesh.add(wheelBackLeft)\n\n        let wheelBackRight = createWheel()\n        wheelBackRight.position.set(-8, 3, -6)\n        that.wheels.push(wheelBackRight)\n        that.mesh.add(wheelBackRight)\n\n        function createWheel() {\n            let wheel = new THREE.Object3D()\n\n            let wheelOuterGeometry = new THREE.CylinderGeometry(3, 3, 3, 32)\n            wheelOuterGeometry.rotateX(0.5 * Math.PI)\n            let wheelOuter = utils.makeMesh('lambert', wheelOuterGeometry, 0x000000)\n            wheel.add(wheelOuter)\n\n            let wheelInner = utils.makeMesh('lambert', wheelOuterGeometry, 0xdddddd)\n            wheelInner.castShadow = false\n            wheelInner.scale.set(0.8, 0.8, 1.1)\n            wheel.add(wheelInner)\n\n            let wheelCenterGeometry = new THREE.CylinderGeometry(1, 1, 3.6, 4)\n            wheelCenterGeometry.rotateX(0.5 * Math.PI)\n            let wheelCenter = utils.makeMesh('lambert', wheelCenterGeometry, 0xa7a7a7)\n            wheelCenter.castShadow = false\n            wheel.add(wheelCenter)\n\n            return wheel\n        }\n    }\n\n    function addLights() {\n        let carLightsGeometry = new THREE.Geometry()\n        let carLigetGeometry = new THREE.BoxGeometry(2, 2, 2)\n\n        let carLightsPosition = [\n            [12.5, 7.1, 6.1],\n            [12.5, 7.1, -6.1],\n            [-14, 7.1, 6.1],\n            [-14, 7.1, -6.1]\n        ]\n        carLightsPosition.forEach(function(elem) {\n            let x = elem[0],\n                y = elem[1],\n                z = elem[2]\n            let geometry = carLigetGeometry.clone()\n            geometry.translate(x, y, z)\n            carLightsGeometry.merge(geometry)\n        })\n\n        let carLightFrontGeometry = carLigetGeometry.clone()\n        carLightFrontGeometry.scale(1, 1.3, 7.1)\n        carLightFrontGeometry.translate(12.1, 3.3, 0)\n        carLightsGeometry.merge(carLightFrontGeometry)\n\n        let carLightBackGeometry = carLightFrontGeometry.clone()\n        carLightBackGeometry.translate(-26, 0, 0)\n        carLightsGeometry.merge(carLightBackGeometry)\n\n        carLightsGeometry = new THREE.BufferGeometry().fromGeometry(carLightsGeometry)\n        let carLights = utils.makeMesh('phong', carLightsGeometry, 0xffffff)\n        that.mesh.add(carLights)\n\n    }\n\n    function addWindows() {\n        let carWindows = new THREE.Object3D()\n\n        let carWindowLeft = new THREE.Object3D()\n        let carWindowLeftFrontCoords = [\n            [-2, 8],\n            [4, 8],\n            [2.5, 12],\n            [-2, 12]\n        ]\n        let carWindowLeftFront = makeWindow(carWindowLeftFrontCoords)\n        carWindowLeft.add(carWindowLeftFront)\n\n        let carWindowLeftBackCoords = [\n            [-9, 8],\n            [-3, 8],\n            [-3, 12],\n            [-7.5, 12]\n        ]\n        let carWindowLeftBack = makeWindow(carWindowLeftBackCoords)\n        carWindowLeft.add(carWindowLeftBack)\n        carWindowLeft.position.z = 7.1\n        carWindows.add(carWindowLeft)\n\n        let carWindowRight = carWindowLeft.clone()\n        carWindowRight.position.z = -7.1\n        carWindows.add(carWindowRight)\n\n        let carWindowFrontGeometry = new THREE.CubeGeometry(0.1, 5, 12)\n        carWindowFrontGeometry.rotateZ(0.12 * Math.PI)\n        carWindowFrontGeometry.translate(4.2, 10, 0)\n        let carWindowFront = utils.makeMesh('phong', carWindowFrontGeometry, 0x000000)\n        carWindows.add(carWindowFront)\n\n        let carWindowBack = carWindowFront.clone()\n        carWindowBack.rotation.z = -0.24 * Math.PI\n        carWindowBack.position.x = -19\n        carWindowBack.position.y = 6\n        // carWindowFrontGeometry.translate(4.2,10,7)\n        carWindows.add(carWindowBack)\n\n        that.mesh.add(carWindows)\n    }\n\n    function addBody() {\n        let carBodyCoords = [\n            [-13, 2],\n            [13, 2],\n            [13, 8],\n            [5, 8],\n            [3, 13],\n            [-8, 13],\n            [-10, 8],\n            [-13, 8],\n            [-13, 2]\n        ]\n        let carBodyShape = utils.makeShape(carBodyCoords)\n        let carBodyGeometry = utils.makeExtrudeGeometry(carBodyShape, 14)\n        carBodyGeometry.translate(0, -7, 0)\n        carBodyGeometry.rotateX(0.5 * Math.PI)\n        let carBody = utils.makeMesh('phong', carBodyGeometry, that.color)\n        that.mesh.add(carBody)\n    }\n\n    function makeWindow(coords) {\n        let windowColor = 0x000000\n        let shape = utils.makeShape(coords)\n        let geometry = utils.makeExtrudeGeometry(shape, 0.1)\n        geometry.rotateX(0.5 * Math.PI)\n        let mesh = utils.makeMesh('phong', geometry, windowColor)\n        mesh.castShadow = false\n        return mesh\n    }\n}\nCar.prototype = {\n    setPosition: function(x, y, z) {\n        this.mesh.position.set(x, y, z)\n    },\n    forward: function(speed) {\n        speed = speed || 1\n        this._moving(speed, true)\n    },\n    backward: function(speed) {\n        speed = speed || 1\n        this._moving(speed, false)\n    },\n    turnLeft: function(angle, speed) {\n        this._turn(angle, true, speed)\n    },\n    turnRight: function(angle, speed) {\n        this._turn(angle, false, speed)\n    },\n    _turn: function(angle, direction, speed) {\n        direction = direction ? 1 : -1\n        if (speed) {\n            if (this.startAngle < angle) {\n                this.mesh.rotation.y += speed\n                this.startAngle += speed\n                if (angle - this.startAngle < speed) {\n                    let originAngle = this.mesh.rotation.y - this.startAngle\n                    this.mesh.rotation.y = originAngle + angle\n                    this.startAngle = 0\n                    return\n                }\n            }\n        } else {\n            this.mesh.rotation.y += angle * direction\n        }\n    },\n    _moving: function(speed, direction) {\n        let rotation = this.mesh.rotation.y\n        direction = direction ? 1 : -1\n        let xLength = speed * Math.cos(rotation) * direction,\n            zLength = speed * Math.sin(rotation) * direction\n        this.mesh.position.x += xLength\n        this.mesh.position.z -= zLength\n        this._rotateWheels(speed)\n    },\n    _rotateWheels: function(speed) {\n        this.wheels.forEach(function(elem) {\n            elem.rotation.z -= 0.1 * speed\n        })\n    }\n}\n\nexport default Car\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/mini-city/js/Car.js","let textures = {\n    window: function() {\n        let canvas = document.createElement('canvas');\n        let ctx = canvas.getContext('2d');\n\n        canvas.width = 32\n        canvas.height = 32\n\n        let colors = {\n            border: '#3c3443',\n            top: '#9d94a7',\n            bottom: '#796e8c'\n        }\n\n        ctx.fillStyle = colors.border\n        ctx.fillRect(0, 0, 32, 32)\n        ctx.fillStyle = colors.top\n        ctx.fillRect(2, 2, 13, 13)\n        ctx.fillStyle = colors.top\n        ctx.fillRect(17, 2, 13, 13)\n        ctx.fillStyle = colors.bottom\n        ctx.fillRect(2, 17, 13, 13)\n        ctx.fillStyle = colors.bottom\n        ctx.fillRect(17, 17, 13, 13)\n\n        let canvasTexture = new THREE.Texture(canvas)\n        canvasTexture.wrapS = THREE.RepeatWrapping;\n        canvasTexture.wrapT = THREE.RepeatWrapping;\n        canvasTexture.needsUpdate = true;\n\n        return canvasTexture;\n    }\n}\n\nexport default textures;\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/mini-city/js/textures.js","let treesPosition = [\n    [-110, -110],\n    [-90, -110],\n    [-70, -110],\n    [-50, -110],\n    [-30, -110],\n    [-10, -110],\n    [10, -110],\n    [30, -110],\n    [50, -110],\n    [70, -110],\n    [90, -110],\n    [-110, 110],\n    [-110, 90],\n    [-110, 70],\n    [-110, 50],\n    [-110, 30],\n    [-110, 10],\n    [-110, -10],\n    [-110, -30],\n    [-110, -50],\n    [-110, -70],\n    [-110, -90],\n    [110, 110],\n    [90, 110],\n    [70, 110],\n    [50, 110],\n    [30, 110],\n    [-30, 110],\n    [-50, 110],\n    [-70, 110],\n    [-90, 110],\n    [110, -110],\n    [110, -90],\n    [110, -70],\n    [110, -50],\n    [110, -30],\n    [110, -10],\n    [110, 10],\n    [110, 30],\n    [110, 50],\n    [110, 70],\n    [110, 90]\n]\nexport default treesPosition;\n\n\n// WEBPACK FOOTER //\n// ./src/pages/mini-city/config/treesPosition.js","<template>\n    <div class=\"container\">\n        <div class=\"info\">\n            <a class=\"title\" href=\"https://github.com/luosijie/threejs-examples\" target=\"_blank\">\n                Mini City\n            </a>\n            <a class=\"author\" href=\"https://luosijie.github.io/\" target=\"_blank\">\n                Created By Jesse Luo\n            </a>\n        </div>\n        <canvas/>\n    </div>\n</template>\n<script>\nimport Car from './js/Car'\nimport textures from './js/textures.js'\nimport treesPosition from './config/treesPosition'\nimport utils from './js/utils.js'\nexport default {\n    name: 'HelloWorld',\n    data() {\n        return {\n            scene: null,\n            camera: null,\n            renderer: null,\n            cars: [],\n            width: '',\n            height: '',\n            config: {\n                isMobile: false,\n                background: 0x282828\n            }\n        }\n    },\n    methods: {\n        checkUserAgent() {\n            let n = navigator.userAgent;\n            if (n.match(/Android/i) || n.match(/webOS/i) || n.match(/iPhone/i) || n.match(/iPad/i) || n.match(/iPod/i) || n.match(/BlackBerry/i)) {\n                this.config.isMobile = true\n                this.camera.position.set(420, 420, 420)\n                this.renderer.shadowMap.enabled = false\n            }\n        },\n        buildMovingCars() {\n            let carsPosition = [\n                [-130, 145, 0],\n                [10, 145, 0],\n                [145, 20, 0.5],\n                [30, -145, 1],\n                [-145, -60, 1.5]\n            ]\n            carsPosition.forEach(elem => {\n                let car = new Car()\n                let x = elem[0],\n                    z = elem[1],\n                    r = elem[2]\n                car.setPosition(x, 0, z)\n                car.mesh.rotation.y = r * Math.PI\n                this.cars.push(car)\n                this.scene.add(car.mesh)\n            })\n        },\n        buildStaticCars() {\n            let carsPosition = [\n                [-84, 82, 1.5],\n                [-58, 82, 1.5],\n                [-32, 82, 1.5],\n                [84, 82, 1.5]\n            ]\n            carsPosition.forEach(elem => {\n                let car = new Car()\n                let x = elem[0],\n                    z = elem[1],\n                    r = elem[2]\n                car.setPosition(x, 0, z)\n                car.mesh.rotation.y = r * Math.PI\n                this.scene.add(car.mesh)\n            })\n        },\n        buildRoad() {\n            let road = new THREE.Object3D()\n            let roadColor = 0xffffff\n            let roadBorderOuterCoords = [\n                [-160, 160],\n                [160, 160],\n                [160, -160],\n                [-160, -160]\n            ]\n            let roadBorderOuterHoleCoords = [\n                [-159, 159],\n                [-159, -159],\n                [159, -159],\n                [159, 159]\n            ]\n            let roadBorderOuterShape = utils.makeShape(roadBorderOuterCoords, roadBorderOuterHoleCoords)\n            let roadBorderOuterGeometry = utils.makeExtrudeGeometry(roadBorderOuterShape, 0.1)\n            let roadBorderOuter = utils.makeMesh('phong', roadBorderOuterGeometry, roadColor)\n            road.add(roadBorderOuter)\n\n            let roadBorderInnerCoords = [\n                [-131, 131],\n                [-131, -131],\n                [131, -131],\n                [131, 131],\n                [19, 131],\n                [19, 99],\n                [99, 99],\n                [99, -99],\n                [-99, -99],\n                [-99, 99],\n                [-19, 99],\n                [-19, 131]\n            ]\n            let roadBorderInnerShape = utils.makeShape(roadBorderInnerCoords)\n            let roadBorderInnnerGeometry = utils.makeExtrudeGeometry(roadBorderInnerShape, 0.1)\n            let roadBoaderInnder = utils.makeMesh('phong', roadBorderInnnerGeometry, roadColor)\n            roadBoaderInnder.rotation.y = Math.PI\n            road.add(roadBoaderInnder)\n\n            let roadLinesGeometry = new THREE.Geometry()\n            let roadLineGeometry = new THREE.BoxGeometry(20, 0.1, 2)\n\n            let roadLinesBottomGeometry = new THREE.Geometry()\n            for (let i = 0; i < 9; i++) {\n                let geometry = roadLineGeometry.clone()\n                geometry.translate(i * 30, 0, -1)\n                roadLinesBottomGeometry.merge(geometry)\n            }\n            roadLinesBottomGeometry.translate(-120, 0, 145)\n            roadLinesGeometry.merge(roadLinesBottomGeometry)\n\n            let roadLinesTopGeometry = roadLinesBottomGeometry.clone()\n            roadLinesTopGeometry.translate(0, 0, -290)\n            roadLinesGeometry.merge(roadLinesTopGeometry)\n\n            let roadLinesLeftGeometry = roadLinesBottomGeometry.clone()\n            roadLinesLeftGeometry.rotateY(0.5 * Math.PI)\n            roadLinesGeometry.merge(roadLinesLeftGeometry)\n\n            let roadLinesRightGeometry = roadLinesBottomGeometry.clone()\n            roadLinesRightGeometry.rotateY(-0.5 * Math.PI)\n            roadLinesGeometry.merge(roadLinesRightGeometry)\n            roadLinesGeometry = new THREE.BufferGeometry().fromGeometry(roadLinesGeometry)\n            let roadLines = utils.makeMesh('phong', roadLinesGeometry, roadColor)\n            road.add(roadLines)\n\n            this.scene.add(road)\n        },\n        buildbuilding() {\n            let _this = this;\n            let planeGeometry = new THREE.BoxBufferGeometry(320, 6, 320)\n            let plane = utils.makeMesh('lambert', planeGeometry, 0x6f5f6a)\n            plane.position.y = -3\n            this.scene.add(plane)\n\n            addFense()\n            addGreen()\n            addTrees()\n            addHospital()\n            addLamps()\n\n            function addLamps() {\n                let lampsPosition = [\n                    [-12.5, 12.5, 1.25],\n                    [-7.5, 12.5, -0.5],\n                    [-2.5, 12.5, -0.5],\n                    [2.5, 12.5, -0.5],\n                    [7.5, 12.5, -0.5],\n                    [12.5, 12.5, -0.25],\n                    [12.5, 7.5, 0],\n                    [12.5, 2.5, 0],\n                    [12.5, -2.5, 0],\n                    [12.5, -7.5, 0],\n                    [12.5, -12.5, 0.25],\n                    [7.5, -12.5, 0.5],\n                    [2.5, -12.5, 0.5],\n                    [-2.5, -12.5, 0.5],\n                    [-7.5, -12.5, 0.5],\n                    [-12.5, -12.5, 0.75],\n                    [-12.5, -7.5, 1],\n                    [-12.5, -2.5, 1],\n                    [-12.5, 2.5, 1],\n                    [-12.5, 7.5, 1]\n                ]\n\n                lampsPosition.forEach(function(elem) {\n                    let x = elem[0] * 10,\n                        z = elem[1] * 10,\n                        r = elem[2]\n                    let lamp = createLamp()\n                    lamp.rotation.y = r * Math.PI\n                    lamp.position.set(x, 0, z)\n                    _this.scene.add(lamp)\n                })\n            }\n\n            function addHospital() {\n                let hospital = createHospital()\n                hospital.position.z = -20\n                _this.scene.add(hospital)\n            }\n\n            function addGreen() {\n                let greenCoords = [\n                    [-120, -120],\n                    [-120, 120],\n                    [120, 120],\n                    [120, -120],\n                    [20, -120],\n                    [20, -100],\n                    [100, -100],\n                    [100, 100],\n                    [-100, 100],\n                    [-100, -100],\n                    [-20, -100],\n                    [-20, -120],\n                    [-120, -120]\n                ]\n                let greenShape = utils.makeShape(greenCoords)\n\n                let greenGeometry = utils.makeExtrudeGeometry(greenShape, 3)\n                let green = utils.makeMesh('lambert', greenGeometry, 0xc0c06a)\n                _this.scene.add(green)\n            }\n\n            function addFense() {\n                let fenseCoords = [\n                    [-130, -130],\n                    [-130, 130],\n                    [130, 130],\n                    [130, -130],\n                    [20, -130],\n                    [20, -120],\n                    [120, -120],\n                    [120, 120],\n                    [-120, 120],\n                    [-120, -120],\n                    [-20, -120],\n                    [-20, -130],\n                    [-130, -130]\n                ]\n                let fenseShape = utils.makeShape(fenseCoords)\n\n                let fenseGeometry = utils.makeExtrudeGeometry(fenseShape, 3)\n                let fense = utils.makeMesh('lambert', fenseGeometry, 0xe5cabf)\n                _this.scene.add(fense)\n            }\n\n            function addTrees() {\n                treesPosition.forEach(function(elem) {\n                    let x = elem[0],\n                        y = 1,\n                        z = elem[1]\n                    let tree = createTree(x, y, z)\n                    _this.scene.add(tree)\n                })\n            }\n\n            function createLamp() {\n                let lamp = new THREE.Object3D()\n                let pillarGeomertry = new THREE.CubeGeometry(2, 30, 2)\n                pillarGeomertry.translate(0, 15, 0)\n                let pillar = utils.makeMesh('phong', pillarGeomertry, 0xebd1c2)\n                lamp.add(pillar)\n\n                let connectGeometry = new THREE.CubeGeometry(10, 1, 1)\n                let connect = utils.makeMesh('phong', connectGeometry, 0x2c0e0e)\n                connect.position.set(3, 30, 0)\n                lamp.add(connect)\n\n                let lightGeometry = new THREE.CubeGeometry(6, 2, 4)\n                let light\n                light = utils.makeMesh('phong', lightGeometry, 0xebd1c2)\n                light.position.set(10, 30, 0)\n                lamp.add(light)\n\n                return lamp\n            }\n\n            function createHospital() {\n                let hospital = new THREE.Object3D()\n\n                let baseGeometry = new THREE.BoxBufferGeometry(180, 3, 140)\n                let base = utils.makeMesh('lambert', baseGeometry, 0xffffff)\n                base.position.y = 1\n                hospital.add(base)\n\n                let frontMainCoords = [\n                    [-80, -30],\n                    [-80, 20],\n                    [50, 20],\n                    [50, 0],\n                    [20, -30],\n                    [-80, -30]\n                ]\n                let frontMainShape = utils.makeShape(frontMainCoords)\n                let frontMainGeometry = utils.makeExtrudeGeometry(frontMainShape, 100)\n                let frontMainMaterial = new THREE.MeshPhongMaterial({ map: textures.window() })\n                frontMainMaterial.map.repeat.set(0.1, 0.08)\n                let frontMain = new THREE.Mesh(frontMainGeometry, frontMainMaterial)\n                frontMain.castShadow = true\n                frontMain.receiveShadow = true\n                hospital.add(frontMain)\n\n                let frontTopShape = frontMainShape\n                let frontTopGeometry = utils.makeExtrudeGeometry(frontTopShape, 5)\n                let frontTop = utils.makeMesh('lambert', frontTopGeometry, 0xb1a7af)\n                frontTop.position.y = 100\n                hospital.add(frontTop)\n\n                let frontRoofShelfGeometry = new THREE.Geometry()\n                let frontRoofShelfCubeGeometry = new THREE.BoxGeometry(2, 2, 40)\n                // for z-axis\n                for (let i = 0; i < 12; i++) {\n                    let geometry = frontRoofShelfCubeGeometry.clone()\n                    geometry.translate(i * 5, 0, 0)\n                    frontRoofShelfGeometry.merge(geometry)\n                }\n                // for x-axis\n                for (let i = 0; i < 2; i++) {\n                    let geometry = frontRoofShelfCubeGeometry.clone()\n                    geometry.rotateY(0.5 * Math.PI)\n                    geometry.scale(1.6, 1, 1)\n                    geometry.translate(27, 0, -15 + i * 30)\n                    frontRoofShelfGeometry.merge(geometry)\n                }\n                // for y-axis\n                let frontRoofShelfCubeYPosition = [\n                    [0, 0],\n                    [1, 0],\n                    [0, 1],\n                    [1, 1]\n                ]\n                for (let i = 0; i < frontRoofShelfCubeYPosition.length; i++) {\n                    let p = frontRoofShelfCubeYPosition[i]\n                    let geometry = frontRoofShelfCubeGeometry.clone()\n                    geometry.scale(1, 1, 0.4)\n                    geometry.rotateX(0.5 * Math.PI)\n                    geometry.translate(p[0] * 55, 0, -15 + p[1] * 30)\n                    frontRoofShelfGeometry.merge(geometry)\n                }\n                frontRoofShelfGeometry = new THREE.BufferGeometry().fromGeometry(frontRoofShelfGeometry)\n                let frontRoofShelf = utils.makeMesh('phong', frontRoofShelfGeometry, 0xffffff)\n                frontRoofShelf.position.set(-70, 115, 5)\n                hospital.add(frontRoofShelf)\n\n                let frontPlatGeometry = new THREE.BoxBufferGeometry(150, 3, 90)\n                let fronPlat = utils.makeMesh('lambert', frontPlatGeometry, 0x0792a5)\n                fronPlat.position.set(-3, 18, 25)\n                hospital.add(fronPlat)\n\n                let frontPlatVerticalGeometry = new THREE.BoxBufferGeometry(150, 15, 3)\n                let frontPlatVertical = utils.makeMesh('phong', frontPlatVerticalGeometry, 0x0792a5)\n                frontPlatVertical.receiveShadow = false\n                frontPlatVertical.position.set(-3, 24, 68.5)\n                hospital.add(frontPlatVertical)\n\n                let frontPlatVerticalWhiteGeometry = new THREE.BoxBufferGeometry(150, 3, 3)\n                let frontPlatVerticalWhite = utils.makeMesh('phong', frontPlatVerticalWhiteGeometry, 0xffffff)\n                frontPlatVerticalWhite.position.set(-3, 33, 68.5)\n                hospital.add(frontPlatVerticalWhite)\n\n                let frontPlatPillarGeometry = new THREE.CylinderGeometry(2, 2, 15, 32)\n                let frontPlatPillar = utils.makeMesh('lambert', frontPlatPillarGeometry, 0xffffff)\n                frontPlatPillar.position.set(-60, 10, 55)\n                hospital.add(frontPlatPillar)\n\n                let frontPlatPillar2 = frontPlatPillar.clone()\n                frontPlatPillar2.position.set(55, 10, 55)\n                hospital.add(frontPlatPillar2)\n\n                let frontBorderVerticles = new THREE.Object3D()\n                let frontBorderVerticleGeometry = new THREE.BoxBufferGeometry(4, 106, 4)\n                let frontBorderVerticleMesh = utils.makeMesh('phong', frontBorderVerticleGeometry, 0xffffff)\n                let frontBorderVerticle1 = frontBorderVerticleMesh.clone()\n                frontBorderVerticle1.position.set(-80, 52, 30)\n                frontBorderVerticles.add(frontBorderVerticle1)\n                let frontBorderVerticle2 = frontBorderVerticleMesh.clone()\n                frontBorderVerticle2.position.set(-80, 52, -20)\n                frontBorderVerticles.add(frontBorderVerticle2)\n                let frontBorderVerticle3 = frontBorderVerticleMesh.clone()\n                frontBorderVerticle3.position.set(50, 52, -18)\n                frontBorderVerticles.add(frontBorderVerticle3)\n                hospital.add(frontBorderVerticles)\n\n                let frontRoofCoords = [\n                    [-82, -32],\n                    [20, -32],\n                    [52, 0],\n                    [52, 22],\n                    [-82, 22],\n                    [-82, -32]\n                ]\n                let frontRoofHolePath = [\n                    [-78, -28],\n                    [20, -28],\n                    [48, 0],\n                    [48, 18],\n                    [-78, 18],\n                    [-78, -28]\n                ]\n                let frontRoofShape = utils.makeShape(frontRoofCoords, frontRoofHolePath)\n                let frontRoofGeometry = utils.makeExtrudeGeometry(frontRoofShape, 8)\n                let frontRoof = utils.makeMesh('phong', frontRoofGeometry, 0xffffff)\n                frontRoof.position.y = 100\n                hospital.add(frontRoof)\n\n                let backMainCoords = [\n                    [-80, 20],\n                    [-80, 60],\n                    [80, 60],\n                    [80, 20],\n                    [-80, 20]\n                ]\n                let backMainHolePath = [\n                    [-78, 22],\n                    [78, 22],\n                    [78, 58],\n                    [-78, 58],\n                    [-78, 22]\n                ]\n                let backMainShape = utils.makeShape(backMainCoords, backMainHolePath)\n\n                let backMainGeometry = utils.makeExtrudeGeometry(backMainShape, 90)\n                let backMain = utils.makeMesh('lambert', backMainGeometry, 0xf2e21b)\n                hospital.add(backMain)\n\n                let backMiddleCoords = [\n                    [0, 0],\n                    [36, 0],\n                    [36, 70],\n                    [0, 70],\n                    [0, 0]\n                ]\n                let backMiddleHolePath = [\n                    [2, 2],\n                    [34, 2],\n                    [34, 68],\n                    [2, 68],\n                    [2, 2]\n                ]\n                let backMiddleShape = utils.makeShape(backMiddleCoords, backMiddleHolePath)\n                let backMiddkeGeometry = utils.makeExtrudeGeometry(backMiddleShape, 165)\n                let backMiddle = utils.makeMesh('lambert', backMiddkeGeometry, 0xffffff)\n\n                backMiddle.rotation.x = -0.5 * Math.PI\n                backMiddle.rotation.z = -0.5 * Math.PI\n                backMiddle.position.y = 86\n                backMiddle.position.z = -58\n                backMiddle.position.x = -78\n                hospital.add(backMiddle)\n\n                let backMiddleWindowGeometry = new THREE.PlaneGeometry(32, 66, 1, 1)\n                let backMiddleWindowMaterial = new THREE.MeshPhongMaterial({ map: textures.window() })\n                backMiddleWindowMaterial.map.repeat.set(2, 6)\n\n                let backMiddleWindow = new THREE.Mesh(backMiddleWindowGeometry, backMiddleWindowMaterial)\n                backMiddleWindow.position.set(83, 51, -40)\n                backMiddleWindow.rotation.y = 0.5 * Math.PI\n                hospital.add(backMiddleWindow)\n\n                let windowBackOrigin = createWindow()\n                windowBackOrigin.scale.set(0.6, 0.6, 1)\n                windowBackOrigin.rotation.y = Math.PI\n                windowBackOrigin.position.set(65, 75, -61)\n                for (let i = 0; i < 7; i++) {\n                    for (let j = 0; j < 4; j++) {\n                        let windowObj = windowBackOrigin.clone()\n                        windowObj.position.x -= i * 22\n                        windowObj.position.y -= j * 20\n                        hospital.add(windowObj)\n                    }\n                }\n\n                return hospital\n            }\n\n            function createWindow() {\n                let windowObj = new THREE.Object3D()\n                let glassGeometry = new THREE.PlaneGeometry(20, 20)\n                let glass = utils.makeMesh('phong', glassGeometry, 0x6a5e74)\n                windowObj.add(glass)\n\n                let windowBorderGeometry = new THREE.BoxBufferGeometry(22, 2, 2)\n                let windowBorder = utils.makeMesh('phong', windowBorderGeometry, 0xffffff)\n\n                let windowBorderTop = windowBorder.clone()\n                windowBorderTop.position.y = 10\n                windowObj.add(windowBorderTop)\n\n                let windowBorderBottom = windowBorder.clone()\n                windowBorderBottom.position.y = -10\n                windowObj.add(windowBorderBottom)\n\n                let windowBorderLeft = windowBorder.clone()\n                windowBorderLeft.rotation.z = 0.5 * Math.PI\n                windowBorderLeft.position.x = -10\n                windowObj.add(windowBorderLeft)\n\n                let windowBorderRight = windowBorderLeft.clone()\n                windowBorderRight.position.x = 10\n                windowObj.add(windowBorderRight)\n\n                return windowObj\n            }\n\n            function createTree(x, y, z) {\n                x = x || 0\n                y = y || 0\n                z = z || 0\n\n                let tree = new THREE.Object3D()\n\n                let treeTrunkGeometry = new THREE.BoxBufferGeometry(2, 16, 2)\n                let treeTrunk = utils.makeMesh('lambert', treeTrunkGeometry, 0x8a613a)\n                treeTrunk.position.y = 8\n                tree.add(treeTrunk)\n\n                let treeLeafsGeometry = new THREE.BoxBufferGeometry(8, 8, 8)\n                let treeLeafs = utils.makeMesh('lambert', treeLeafsGeometry, 0x9c9e5d)\n                treeLeafs.position.y = 13\n                tree.add(treeLeafs)\n\n                tree.position.set(x, y, z)\n\n                return tree\n            }\n        },\n        buildLightSystem() {\n\n            if (!this.config.isMobile) {\n                let directionalLight = new THREE.DirectionalLight(0xffffff, 1.1);\n                directionalLight.position.set(300, 1000, 500);\n                directionalLight.target.position.set(0, 0, 0);\n                directionalLight.castShadow = true;\n\n                let d = 300;\n                directionalLight.shadow.camera = new THREE.OrthographicCamera(-d, d, d, -d, 500, 1600);\n                directionalLight.shadow.bias = 0.0001;\n                directionalLight.shadow.mapSize.width = directionalLight.shadow.mapSize.height = 1024;\n                this.scene.add(directionalLight)\n\n                let light = new THREE.AmbientLight(0xffffff, 0.3)\n                this.scene.add(light)\n            } else {\n                let hemisphereLight = new THREE.HemisphereLight(0xffffff, 1)\n                this.scene.add(hemisphereLight)\n\n                let light = new THREE.AmbientLight(0xffffff, 0.15)\n                this.scene.add(light)\n            }\n        },\n        // 构建辅助系统\n        buildAuxSystem() {\n            let gridHelper = new THREE.GridHelper(320, 32)\n            this.scene.add(gridHelper)\n\n            let controls = new THREE.OrbitControls(this.camera, this.renderer.domElement)\n            controls.enableDamping = true\n            controls.dampingFactor = 0.25\n            controls.rotateSpeed = 0.35\n        },\n        carMoving(car) {\n            let angle = car.mesh.rotation.y\n            let x = car.mesh.position.x,\n                z = car.mesh.position.z\n\n            if (x < 145 && z === 145) {\n                car.forward()\n            } else if (angle < 0.5 * Math.PI) {\n                car.turnLeft(0.5 * Math.PI, 0.1)\n            } else if (x === 145 && z > -145) {\n                car.forward()\n            } else if (angle < Math.PI) {\n                car.turnLeft(0.5 * Math.PI, 0.1)\n            } else if (x > -145 && z == -145) {\n                car.forward()\n            } else if (angle < 1.5 * Math.PI) {\n                car.turnLeft(0.5 * Math.PI, 0.1)\n            } else if (x === -145 && z < 145) {\n                car.mesh.rotation.y = 1.5 * Math.PI\n                car.forward()\n            } else if (angle < 2 * Math.PI) {\n                car.turnLeft(0.5 * Math.PI, 0.1)\n            } else {\n                car.setPosition(-145, 0, 145)\n                car.mesh.rotation.set(0, 0, 0)\n            }\n        },\n        onWindowResize() {\n            window.addEventListener('resize', () => {\n                this.width = window.innerWidth\n                this.height = window.innerHeight\n\n                this.camera.aspect = this.width / this.height;\n                this.camera.updateProjectionMatrix()\n\n                this.renderer.setSize(this.width, this.height)\n            })\n        },\n        loop() {\n            // stats.update()\n            this.cars.forEach(car => {\n                this.carMoving(car)\n            })\n            this.renderer.render(this.scene, this.camera)\n            requestAnimationFrame(this.loop)\n        }\n    },\n    mounted() {\n\n        this.width = window.innerWidth\n        this.height = window.innerHeight\n\n        this.scene = new THREE.Scene()\n        this.camera = new THREE.PerspectiveCamera(45, this.width / this.height, 1, 5000)\n        this.camera.position.set(330, 330, 330)\n        this.camera.lookAt(this.scene.position)\n\n        this.renderer = new THREE.WebGLRenderer({ \n            antialias: true,\n            canvas: document.querySelector('canvas')\n        });\n        this.renderer.setSize(this.width, this.height)\n        this.renderer.setClearColor(this.config.background)\n        this.renderer.shadowMap.enabled = true\n        this.renderer.shadowMap.type = THREE.PCFSoftShadowMap\n        // document.body.appendChild(this.renderer.domElement)\n\n        this.checkUserAgent()\n\n        this.buildAuxSystem()\n        this.buildLightSystem()\n        this.buildbuilding()\n        this.buildRoad()\n        this.buildStaticCars()\n        this.buildMovingCars()\n\n        this.loop()\n        this.onWindowResize()\n    }\n}\n\n</script>\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style lang=\"scss\" scoped>\n.container {\n    margin: 20px 0;\n    position: absolute;\n    text-align: center;\n    width: 100%;\n    .info {\n        opacity: 0.2;\n    }\n    a {\n        display: block;\n        font-size: 16px;\n        line-height: 28px;\n        color: #ffffff;\n        text-decoration: none;\n    }\n}\n\na.title {\n    font-size: 20px;\n    font-weight: bold;\n}\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/mini-city/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"info\"},[_c('a',{staticClass:\"title\",attrs:{\"href\":\"https://github.com/luosijie/threejs-examples\",\"target\":\"_blank\"}},[_vm._v(\"\\n            Mini City\\n        \")]),_vm._v(\" \"),_c('a',{staticClass:\"author\",attrs:{\"href\":\"https://luosijie.github.io/\",\"target\":\"_blank\"}},[_vm._v(\"\\n            Created By Jesse Luo\\n        \")])]),_vm._v(\" \"),_c('canvas')])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1525e070\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/mini-city/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1525e070\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1525e070\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-1525e070\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/mini-city/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}