{"version":3,"sources":["webpack:///./src/pages/mall/config/svgString.js","webpack:///src/pages/mall/index.vue","webpack:///./src/pages/mall/index.vue?1eba","webpack:///./src/pages/mall/index.vue"],"names":["mall","data","scene","camera","raycaster","renderer","mouse","INTERSECTED","methods","init","this","THREE","Scene","background","Color","PerspectiveCamera","window","innerWidth","innerHeight","position","set","lookAt","Raycaster","WebGLRenderer","antialias","canvas","document","querySelector","setPixelRatio","devicePixelRatio","setSize","addEventListener","onDocumentMouseMove","onWindowResize","buildMall","paths","querySelectorAll","i","length","d","getAttribute","shape","transformSVGPathExposed","svgGeometry","ExtrudeGeometry","amount","stes","bevelEnabled","rotateX","Math","PI","color","svgMaterial","MeshPhongMaterial","shininess","svgMesh","Mesh","name","add","translateX","translateZ","translateY","addLabel","_this","material","children","forEach","elem","geometry","BoxGeometry","y","x","boundingSphere","center","z","buildAuxSystem","axisHelper","AxesHelper","gridHelper","GridHelper","controls","OrbitControls","domElement","enableDamping","dampingFactor","rotateSpeed","buildLightSystem","directionalLight","DirectionalLight","target","castShadow","shadow","OrthographicCamera","bias","mapSize","width","height","light","AmbientLight","aspect","updateProjectionMatrix","event","preventDefault","clientX","clientY","loop","requestAnimationFrame","render","setFromCamera","intersects","intersectObjects","object","emissive","setHex","currentHex","getHex","mounted","innerHTML","svgString","Vector2","Object3D","pages_mall","$createElement","_self","_c","_m","staticRenderFns","_h","staticClass","attrs","href","_v","id","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/1.5936b6f76f98162f5816.js","sourcesContent":["const svgString = `\n <svg id=\"svg_shapes\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"90 0 600 560\">\n    <path name=\"麦当劳\" id=\"svg_4\" d=\"m201.90463,23.01591l65.87312,0l0,47.61912l-65.87312,0l0,-47.61912z\" stroke-opacity=\"null\" stroke-linecap=\"null\" stroke-linejoin=\"null\" stroke-width=\"1.5\" stroke=\"null\" fill=\"#3f7f00\" />\n    <path name=\"麦当劳\" id=\"svg_5\" d=\"m130.47595,235.71465l94.44459,0l0,42.06355l-94.44459,0l0,-42.06355z\" stroke-opacity=\"null\" stroke-linecap=\"null\" stroke-linejoin=\"null\" stroke-width=\"1.5\" stroke=\"null\" fill-opacity=\"null\" fill=\"#3f7f00\" />\n    <path name=\"麦当劳\" id=\"svg_6\" d=\"m129.6823,182.53996l84.12711,0l0,41.2699l-84.12711,0l0,-41.2699z\" stroke-opacity=\"null\" stroke-linecap=\"null\" stroke-linejoin=\"null\" stroke-width=\"1.5\" stroke=\"null\" fill-opacity=\"null\" fill=\"#3f7f00\" />\n    <path name=\"麦当劳\" id=\"svg_8\" d=\"m214.80591,113.92551l32.77018,-32.77018l23.57026,23.57026l-32.77018,32.77018l-23.57026,-23.57026z\" stroke-opacity=\"null\" stroke-linecap=\"null\" stroke-linejoin=\"null\" stroke-width=\"1.5\" stroke=\"null\" fill-opacity=\"null\" fill=\"#3f7f00\" />\n    <path name=\"麦当劳\" id=\"svg_9\" d=\"m242.58371,140.11603l32.77018,-32.77018l23.57026,23.57026l-32.77018,32.77018l-23.57026,-23.57026z\" stroke-opacity=\"null\" stroke-linecap=\"null\" stroke-linejoin=\"null\" stroke-width=\"1.5\" stroke=\"null\" fill-opacity=\"null\" fill=\"#3f7f00\" />\n    <path name=\"麦当劳\" id=\"svg_10\" d=\"m264.80595,79.79849l48.2464,-48.2464l15.23692,15.23692l-48.2464,48.2464l-15.23692,-15.23692z\" stroke-opacity=\"null\" stroke-linecap=\"null\" stroke-linejoin=\"null\" stroke-width=\"1.5\" stroke=\"null\" fill-opacity=\"null\" fill=\"#3f7f00\" />\n    <path name=\"麦当劳\" id=\"svg_11\" d=\"m282.2663,98.84614l48.2464,-48.2464l15.23692,15.23692l-48.2464,48.2464l-15.23692,-15.23692z\" stroke-opacity=\"null\" stroke-linecap=\"null\" stroke-linejoin=\"null\" stroke-width=\"1.5\" stroke=\"null\" fill-opacity=\"null\" fill=\"#3f7f00\" />\n    <path name=\"麦当劳\" id=\"svg_12\" d=\"m302.90125,118.68745l48.2464,-48.2464l15.23692,15.23692l-48.2464,48.2464l-15.23692,-15.23692z\" stroke-opacity=\"null\" stroke-linecap=\"null\" stroke-linejoin=\"null\" stroke-width=\"1.5\" stroke=\"null\" fill-opacity=\"null\" fill=\"#3f7f00\" />\n    <path name=\"麦当劳\" id=\"svg_13\" d=\"m324.32987,140.11605l48.2464,-48.2464l15.23692,15.23692l-48.2464,48.2464l-15.23692,-15.23692z\" stroke-opacity=\"null\" stroke-linecap=\"null\" stroke-linejoin=\"null\" stroke-width=\"1.5\" stroke=\"null\" fill-opacity=\"null\" fill=\"#3f7f00\" />\n    <path name=\"麦当劳\" id=\"svg_14\" d=\"m129.6823,139.68275l39.6826,0l0,34.12704l-39.6826,0l0,-34.12704z\" stroke-opacity=\"null\" stroke-linecap=\"null\" stroke-linejoin=\"null\" stroke-width=\"1.5\" stroke=\"null\" fill=\"#bf005f\" />\n    <path name=\"麦当劳\" id=\"svg_15\" d=\"m175.7141,139.68275l37.30164,0l0,34.12704l-37.30164,0l0,-34.12704z\" stroke-opacity=\"null\" stroke-linecap=\"null\" stroke-linejoin=\"null\" stroke-width=\"1.5\" stroke=\"null\" fill=\"#007f3f\" />\n    <path name=\"麦当劳\" id=\"svg_16\" d=\"m274.12698,175.39709l46.03181,0l0,26.98417l-46.03181,0l0,-26.98417z\" stroke-opacity=\"null\" stroke-linecap=\"null\" stroke-linejoin=\"null\" stroke-width=\"1.5\" stroke=\"null\" fill=\"#7f003f\" />\n    <path name=\"麦当劳\" id=\"svg_17\" d=\"m137.23366,49.58187l47.23197,47.23197l-21.46164,21.46164l-47.23197,-47.23197l21.46164,-21.46164z\" stroke-opacity=\"null\" stroke-linecap=\"null\" stroke-linejoin=\"null\" stroke-width=\"1.5\" stroke=\"null\" fill=\"#7f003f\" />\n    <path name=\"麦当劳\" id=\"svg_18\" d=\"m336.03183,205.55586l69.04772,0l0,31.74608l-69.04772,0l0,-31.74608z\" stroke-opacity=\"null\" stroke-linecap=\"null\" stroke-linejoin=\"null\" stroke-width=\"1.5\" stroke=\"null\" fill=\"#5656ff\" />\n    <path name=\"麦当劳\" id=\"svg_19\" d=\"m336.03183,274.60361l69.04772,0l0,20.63496l-69.04772,0l0,-20.63496z\" stroke-opacity=\"null\" stroke-linecap=\"null\" stroke-linejoin=\"null\" stroke-width=\"1.5\" stroke=\"null\" fill=\"#5656ff\" />\n    <path name=\"麦当劳\" id=\"svg_20\" d=\"m336.03183,305.42343l69.04772,0l0,74.60332l-69.04772,0l0,-74.60332z\" stroke-opacity=\"null\" stroke-linecap=\"null\" stroke-linejoin=\"null\" stroke-width=\"1.5\" stroke=\"null\" fill=\"#007f3f\" />\n    <path name=\"麦当劳\" id=\"svg_21\" d=\"m155.48768,30.53422l47.23197,47.23197l-15.11243,15.11243l-47.23197,-47.23197l15.11243,-15.11243z\" stroke-opacity=\"null\" stroke-linecap=\"null\" stroke-linejoin=\"null\" stroke-width=\"1.5\" stroke=\"null\" fill=\"#7f003f\" />\n    <path name=\"麦当劳\" id=\"svg_23\" d=\"m337.61912,200.0003c0,0 66.66677,0 66.66677,0c0,0 2.38096,-71.42868 2.38096,-71.42868c0,0 -23.02959,0 -23.33294,0c0.30335,0 -31.82833,32.93901 -32.53973,31.74608c0.15812,0.63553 -13.26811,0.79365 -13.49208,0c0.10362,0 0.31703,39.6826 0.31703,39.6826z\" stroke-opacity=\"null\" stroke-width=\"1.5\" stroke=\"null\" fill=\"#bf5f00\" />\n    <path name=\"麦当劳\" id=\"svg_25\" d=\"m279.68253,216.67462l38.88895,0l0,64.28581l-38.88895,0l0,-64.28581z\" stroke-opacity=\"null\" stroke-linecap=\"null\" stroke-linejoin=\"null\" stroke-width=\"1.5\" stroke=\"null\" fill=\"#7f003f\" />\n    <path name=\"麦当劳\" id=\"svg_26\" d=\"m293.96826,293.91617l26.19052,0l0,46.82546l-26.19052,0l0,-46.82546z\" stroke-opacity=\"null\" stroke-linecap=\"null\" stroke-linejoin=\"null\" stroke-width=\"1.5\" stroke=\"null\" fill=\"#7f003f\" />\n</svg>\n`\nexport default svgString;\n       \n\n\n// WEBPACK FOOTER //\n// ./src/pages/mall/config/svgString.js","<template>\n    <div class=\"container\">\n        <div class=\"from\"><a href=\"https://github.com/luosijie/threejs-examples/tree/master/mall\">项目地址</a></div>\n        <canvas id=\"canvas\"></canvas>\n        <div class=\"svg-container\">\n        </div>\n    </div>\n</template>\n<script>\nimport svgString from './config/svgString';\nexport default {\n    data() {\n        return {\n            scene: null, // 场景\n            camera: null, // 摄像机\n            raycaster: null, // 射线\n            renderer: null, // 渲染器\n            mall: null, // 商场\n            mouse: null, // 鼠标位置\n            INTERSECTED: null // 被选中的物体\n        }\n    },\n    methods: {\n        /**\n         * 初始化3D环境\n         **/\n        init() {\n            this.scene = new THREE.Scene();\n            this.scene.background = new THREE.Color(0xf0f0f0);\n            // 初始化相机配置\n            this.camera = new THREE.PerspectiveCamera(70, window.innerWidth / window.innerHeight, 1, 10000);\n            this.camera.position.set(300, 300, 300);\n            this.camera.lookAt(this.scene.position);\n            this.raycaster = new THREE.Raycaster();\n            // 初始化\n            this.renderer = new THREE.WebGLRenderer({\n                antialias: true,\n                canvas: document.querySelector('canvas')\n            })\n            this.renderer.setPixelRatio(window.devicePixelRatio);\n            this.renderer.setSize(window.innerWidth, window.innerHeight);\n            // document.body.appendChild(renderer.domElement);\n            document.addEventListener('mousemove', this.onDocumentMouseMove, false);\n            window.addEventListener('resize', this.onWindowResize, false);\n        },\n        /**\n         * 构建商场\n         **/\n        buildMall() {\n            // 获取html中的svg地图路径\n            let svgShapes = document.querySelector('#svg_shapes')\n            let paths = svgShapes.querySelectorAll('path')\n            for (let i = 0; i < paths.length; i++) {\n                let d = paths[i].getAttribute('d')\n                // 使用插件将svg路径转化为THREE.js形状\n                let shape = transformSVGPathExposed(d)\n                // 将形状挤出\n                let svgGeometry = new THREE.ExtrudeGeometry(shape, {\n                    amount: 25,\n                    stes: 1,\n                    bevelEnabled: false\n                })\n                // 由于平面转3D是竖直方向的, 需要旋转为水平方向\n                svgGeometry.rotateX(Math.PI / 2)\n                // 获取svg平面图每个模块对应的颜色\n                let color = paths[i].getAttribute('fill')\n                let svgMaterial = new THREE.MeshPhongMaterial({ color: color, shininess: 100 })\n                let svgMesh = new THREE.Mesh(svgGeometry, svgMaterial)\n                svgMesh.name = paths[i].getAttribute('name')\n                this.mall.add(svgMesh)\n            }\n            this.mall.translateX(-200)\n            this.mall.translateZ(-200)\n            this.mall.translateY(25)\n            this.scene.add(this.mall)\n        },\n        /**\n         * 添加每个店面的标签: 暂时用小方块代替\n         **/\n        addLabel() {\n            let material = new THREE.MeshPhongMaterial({ color: 0x000000 })\n            // 遍历场景中的元素, 在元素上方添加方块: 未来添加具体标签\n            this.mall.children.forEach(elem => {\n                let geometry = new THREE.BoxGeometry(2, 20, 2)\n                let Mesh = new THREE.Mesh(geometry, material);\n                Mesh.position.y = 30\n                Mesh.position.x = elem.geometry.boundingSphere.center.x - 200\n                Mesh.position.z = elem.geometry.boundingSphere.center.z - 200\n                this.scene.add(Mesh)\n            })\n        },\n        /**\n         * 构建辅助系统: 网格和坐标\n         **/\n        buildAuxSystem() {\n            let axisHelper = new THREE.AxesHelper(2000)\n            this.scene.add(axisHelper)\n            let gridHelper = new THREE.GridHelper(600, 60)\n            this.scene.add(gridHelper)\n            let controls = new THREE.OrbitControls(this.camera, this.renderer.domElement)\n            controls.enableDamping = true\n            controls.dampingFactor = 0.25\n            controls.rotateSpeed = 0.35\n        },\n        /**\n         * 光照系统\n         **/\n        buildLightSystem() {\n            let directionalLight = new THREE.DirectionalLight(0xffffff, 1.1);\n            directionalLight.position.set(300, 1000, 500);\n            directionalLight.target.position.set(0, 0, 0);\n            directionalLight.castShadow = true;\n\n            let d = 300;\n            directionalLight.shadow.camera = new THREE.OrthographicCamera(-d, d, d, -d, 500, 1600);\n            directionalLight.shadow.bias = 0.0001;\n            directionalLight.shadow.mapSize.width = directionalLight.shadow.mapSize.height = 1024;\n            this.scene.add(directionalLight)\n\n            let light = new THREE.AmbientLight(0xffffff, 0.6)\n            this.scene.add(light)\n\n        },\n        /**\n         * 根据浏览器窗口变化动态更新尺寸\n         **/\n        onWindowResize() {\n            this.camera.aspect = window.innerWidth / window.innerHeight;\n            this.camera.updateProjectionMatrix();\n            this.renderer.setSize(window.innerWidth, window.innerHeight);\n        },\n        onDocumentMouseMove(event) {\n            event.preventDefault();\n            this.mouse.x = (event.clientX / window.innerWidth) * 2 - 1;\n            this.mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;\n        },\n        /**\n         * 动画循环\n         **/\n        loop() {\n            requestAnimationFrame(this.loop);\n            this.render();\n        },\n        /**\n         * 渲染画布\n         **/\n        render() {\n            // 鼠标位置向摄像机位置发射一条射线\n            this.raycaster.setFromCamera(this.mouse, this.camera);\n            // 设置射线影响的范围\n            let intersects = this.raycaster.intersectObjects(this.mall.children);\n            if (intersects.length > 0) {\n                if (this.INTERSECTED != intersects[0].object) {\n                    if (this.INTERSECTED) \n                        this.INTERSECTED.material.emissive.setHex(this.INTERSECTED.currentHex);\n                    this.INTERSECTED = intersects[0].object;\n                    this.INTERSECTED.currentHex = this.INTERSECTED.material.emissive.getHex();\n                    this.INTERSECTED.material.emissive.setHex(0xff0000);\n                }\n            } else {\n                if (this.INTERSECTED) this.INTERSECTED.material.emissive.setHex(this.INTERSECTED.currentHex);\n                this.INTERSECTED = null;\n            }\n            this.renderer.render(this.scene, this.camera);\n        }\n    },\n    mounted() {\n        const svgContainer = document.querySelector('.svg-container')\n        svgContainer.innerHTML = svgString\n        this.mouse = new THREE.Vector2() // 二维坐标用来转化鼠标参数\n        this.mall = new THREE.Object3D() // 建一个空对象用来放场景物体\n\n        this.init();\n        this.buildLightSystem();\n        this.buildAuxSystem();\n        this.buildMall();\n        this.loop();\n        this.addLabel()\n    }\n}\n\n</script>\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style lang=\"scss\" scoped>\n.container {\n    // margin: 20px 0;\n    position: absolute;\n    text-align: center;\n    /*opacity: 0.2;*/\n    width: 100%;\n}\n\n.info a {\n    display: block;\n    font-size: 16px;\n    line-height: 28px;\n    color: #ffffff;\n    text-decoration: none;\n}\n\na.title {\n    font-size: 20px;\n    font-weight: bold;\n}\n\n.svg-container {\n    position: absolute;\n    top: 10px;\n    left: 10px;\n    background: white;\n    width: 240px;\n    height: 300px;\n    overflow: hidden;\n    border: 1px solid #f2f2f2;\n    overflow: hidden;\n    border-radius: 6px;\n    box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);\n}\n.from {\n    position: absolute;\n    width: 100%;\n    text-align: center;\n    top: 0;\n    a {\n        color: black;\n    }\n}\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/mall/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"from\"},[_c('a',{attrs:{\"href\":\"https://github.com/luosijie/threejs-examples/tree/master/mall\"}},[_vm._v(\"项目地址\")])]),_vm._v(\" \"),_c('canvas',{attrs:{\"id\":\"canvas\"}}),_vm._v(\" \"),_c('div',{staticClass:\"svg-container\"})])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-9cd50464\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/mall/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-9cd50464\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-9cd50464\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-9cd50464\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/mall/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}